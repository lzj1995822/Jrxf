<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=9" />
    <title>不忘初心，牢记使命</title>
    <script src="js/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="js/vue.js" type="text/javascript"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="js/axios.min.js" type="text/javascript"></script>
    <script src="js/swiper.min.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="js/swiper.min.css">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<style>
    [v-cloak] {
        display: none;
    }
    * {
        padding: 0;
        margin: 0;
    }
    .el-pagination.is-background .el-pager li:not(.disabled).active {
        background-color: red !important;
    }
</style>
<body>
<div id="main" >
    <div class="header">
        <img src="images/newJr/banner.png" style="width: 100%;height: 100%">
    </div>
    <div class="menu">
        <template v-for="(items,index) in menus">
            <span class="menuItems" @click="menuActive(items,index)" ><a :href="'#'+items.name" :style="activeStyle[index]">{{items.text}}</a></span>
        </template>
    </div>
    <div class="list-content">
        <div class="bar">
            <span>当前位置:</span>
            <span>首页</span>
            <span> / {{activeMenu.text}}</span>
        </div>
        <div>
            <img src="images/newJr/partypic.png" height="68" width="48"/>
            <span style="color: red;font-size: 30px;position: relative;left: 5px;top: -25px;">{{activeMenu.text}}</span>
        </div>
        <ul>
            <li :key="item.id" v-for="item in listData" @click="toDetail(item.id)">
                <div style="display: flex;padding: 15px 0;border-bottom: #919191 1px solid">
                    <div style="flex: 5;font-size: 22px;">{{item.title}}</div>
                    <div style="flex: 1;text-align: right;font-size: 16px;color: #a8a8a8;position: relative;top: 10px">{{item.createTime}}</div>
                </div>
            </li>
        </ul>
        <br/>
        <el-pagination
                style="float: right"
                background
                layout="prev, pager, next"
                :current-page="currentPage"
                :page-size.sync="pageSize"
                :total="total"
                @current-change="loadData">
        </el-pagination>
    </div>

</div>
</body>
<script>
    var main = new Vue({
        el:'#main',
        components:{

        },
        data:function() {
            return {
                baseUrl:"http://"+ window.location.host,
                menus:[{text:'中央精神',name:'spirit'},{text:'市委部署',name:'deploy'},{text:'工作动态',name:'dynamic'},{text:'学习研讨',name:'discuss'},{text:'检视整改',name:'inspection'},{text:'优秀楷模',name:'model'}],
                activeStyle:[{color:'red'},{color:'red'},{color:'red'},{color:'red'},{color:'red'},{color:'red'},{color:'red'}],
                activeMenu: {},
                listData: [],
                currentPage: 1,
                pageSize: 10,
                total: 0,
                detailUrl:"http://"+ window.location.host+'/templates/jurong/thematicDetail.html',

            }
        },
        methods:{
            menuActive: function (val,index){
                this.activeMenu = val;
                this.loadData(1);
            },
            loadData: function (currentPage) {
                var self = this;
                var param = {
                    page: {
                        start: (currentPage - 1) * this.pageSize,
                        currPage: currentPage,
                        pageSize: this.pageSize,
                    },
                    type: this.activeMenu.text
                }
                axios({
                    method: 'Post',
                    url: this.baseUrl+'/rememberMission/page',
                    data: param
                }).then(function (res) {
                    if (res.data.result) {
                        self.listData = res.data.obj.data;
                        self.total = res.data.obj.total;
                    }
                })
            },
            toDetail: function(id) {
                window.open(this.detailUrl + '?id='+id);
            }
        },
        mounted:function(){


        },
        created:function(){
            var self = this;
            var url = window.location.href;
            var active = url.split('?')[1].split('=')[1];
            this.menus.forEach(function(item) {
                if (item.name === active) {
                    self.activeMenu = item;
                }
            })
            this.loadData(1);

        }
    })
</script>
<style>
    #main{
        margin: 0;
        padding: 0;
    }
    ul{
        list-style: none;
    }
    li:hover{
        cursor: pointer;
    }
    .header{
        width:100%;
        /*高度自定*/
    }
    .menu{
        margin-top: -3px;
        width:100%;
        line-height: 60px;
        vertical-align: middle;
        background: url("images/newJr/menu.png") no-repeat;
        background-size: 100% 100%;
        font-size: 25px;
        font-family: "Microsoft YaHei UI";
        font-weight: 600;
        text-align: center;
    }
    .menuItems{
        margin-left: 66px;
        margin-right: 66px;
        cursor: pointer;
    }
    .list-content {
        width: 1000px;
        margin: 0 auto;
    }
    .bar {
        margin: 20px 0;
    }
</style>
</html>
